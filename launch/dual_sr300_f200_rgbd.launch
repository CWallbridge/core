<launch>

    <arg name="r_image" default="r_camera/rgb/image_raw" />
    <arg name="l_image" default="l_camera/rgb/image_raw" />

    <arg name="camera1"              default="r_camera" />
    <arg name="camera1_camera_type"  default="SR300" />
    <arg name="camera1_serial_no"    default="549205001038" />
    <arg name="camera2"              default="l_camera" />
    <arg name="camera2_camera_type"  default="F200" />
    <arg name="camera2_serial_no"    default="022150159107" />

    <!-- Best know configuration for generating depth registered point cloud. -->
    <arg name="mode"            default="manual" />
    <arg name="color_width"     default="640" />
    <arg name="color_height"    default="480" />
    <arg name="depth_width"     default="640" />
    <arg name="depth_height"    default="480" />
    <arg name="depth_fps"       default="30" />
    <arg name="color_fps"       default="30" />

    <!-- Arguments for remapping all device namespaces -->
    <arg name="depth"            default="depth" />
    <arg name="rgb"              default="rgb" />
    <arg name="ir"               default="ir" />
    <arg name="depth_registered" default="depth_registered" />

    <!-- Size of message queue for synchronizing subscribed topics in depth_image_proc package.
       Increase this value for higher resolution and/or frame rates.
       If the depth_registered pointcloud topic generated by the depth_image_proc package does not contain data,
       increase this value further. -->
    <arg name="queue_size"       default="100" />
    <param name="$(arg camera1)/points_xyzrgb_sw_registered/queue_size" type="int" value="$(arg queue_size)" />
    <param name="$(arg camera2)/points_xyzrgb_sw_registered/queue_size" type="int" value="$(arg queue_size)" />

    <!-- Single nodelet manager for all cameras -->
    <arg name="manager" value="camera_nodelet_manager" />
    <node pkg="nodelet" type="nodelet" name="$(arg manager)" args="manager" output="screen"/>

    <group ns="$(arg camera1)">
        <include file="$(find realsense_camera)/launch/includes/nodelet.launch.xml">
	    <arg name="rgb"          value="rgb" />
            <arg name="manager"      value="/$(arg manager)" />
            <arg name="camera"       value="$(arg camera1)" />
            <arg name="camera_type"  value="$(arg camera1_camera_type)" />
            <arg name="serial_no"    value="$(arg camera1_serial_no)" />
        </include>
    </group> 

    <group ns="$(arg camera2)">
        <include file="$(find realsense_camera)/launch/includes/nodelet.launch.xml">
	    <arg name="rgb"          value="rgb" />
            <arg name="manager"      value="/$(arg manager)" />
            <arg name="camera"       value="$(arg camera2)" />
            <arg name="camera_type"  value="$(arg camera2_camera_type)" />
            <arg name="serial_no"    value="$(arg camera2_serial_no)" />
        </include>
    </group>

</launch>
